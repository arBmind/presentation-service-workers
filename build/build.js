(function(L){"object"===typeof exports&&"undefined"!==typeof module?module.exports=L():"function"===typeof define&&define.amd?define([],L):("undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:this).bespoke=L()})(function(){return function e(d,f,a){function c(b,m){if(!f[b]){if(!d[b]){var k="function"==typeof require&&require;if(!m&&k)return k(b,!0);if(h)return h(b,!0);k=Error("Cannot find module '"+b+"'");throw k.code="MODULE_NOT_FOUND",k;}k=f[b]={exports:{}};
d[b][0].call(k.exports,function(a){var h=d[b][1][a];return c(h?h:a)},k,k.exports,e,d,f,a)}return f[b].exports}for(var h="function"==typeof require&&require,b=0;b<a.length;b++)c(a[b]);return c}({1:[function(e,d,f){d.exports=function(){return function(a){var c=function(b,a){b.classList.add("bespoke-"+a)},h=function(b,a){b.className=b.className.replace(new RegExp("bespoke-"+a+"(\\s|$)","g")," ").trim()},b=function(b,m){var k=a.slides[a.slide()],d=m-a.slide(),g=0<d?"after":"before";["before(-\\d+)?",
"after(-\\d+)?","active","inactive"].map(h.bind(null,b));b!==k&&["inactive",g,g+"-"+Math.abs(d)].map(c.bind(null,b))};c(a.parent,"parent");a.slides.map(function(b){c(b,"slide")});a.on("activate",function(x){a.slides.map(b);c(x.slide,"active");h(x.slide,"inactive")})}}},{}],2:[function(e,d,f){d.exports=function(){return function(a){var c=function(){var b;(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement?(b=document).exitFullscreen||
b.webkitExitFullscreen||b.mozCancelFullScreen||b.msExitFullscreen:(b=document.documentElement).requestFullscreen||b.webkitRequestFullscreen||b.mozRequestFullScreen||b.msRequestFullscreen).apply(b)},h=function(b){var a=b.which;70!==a&&122!==a||b.ctrlKey||b.shiftKey||b.altKey||b.metaKey||(c(),122===a&&b.preventDefault())};if(document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled)a.on("destroy",function(){document.removeEventListener("keydown",
h)}),a.on("fullscreen.toggle",c),document.addEventListener("keydown",h)}}},{}],3:[function(e,d,f){d.exports=function(){return function(a){var c=function(){var b=window.location.hash.slice(1),c=parseInt(b,10);b&&(c?h(c-1):a.slides.forEach(function(a,c){a.getAttribute("data-bespoke-hash")===b&&h(c)}))},h=function(b){b=-1<b&&b<a.slides.length?b:0;b!==a.slide()&&a.slide(b)};setTimeout(function(){c();a.on("activate",function(b){var a=b.slide.getAttribute("data-bespoke-hash");window.location.hash=a||b.index+
1});window.addEventListener("hashchange",c)},0)}}},{}],4:[function(e,d,f){d.exports=function(){return function(a){var c=/\/\/player\.vimeo\.com\//,h=/\/\/www\.youtube\.com\/embed\//,b="file:"===location.protocol,d=function(b,a,c,h){var l=-1;b=a.querySelectorAll(b+(h||""));for(a=b.length;++l<a;c(b[l]));},m=function(b,a){b.contentWindow.postMessage(JSON.stringify(a),"*")},k=function(a){var l=a.hasAttribute("data-rewind"),g=Math.min(Math.max(parseFloat(a.getAttribute("data-volume")),0),10);if(a.play)l&&
a.readyState&&(a.currentTime=0),0<=g&&(a.volume=g/10),a.play();else if(h.test(a.src))l&&m(a,{event:"command",func:"seekTo",args:[0]}),0<=g&&m(a,{event:"command",func:"setVolume",args:[10*g]}),m(a,{event:"command",func:"playVideo"});else if(c.test(a.src)){if(b)return console.warn("WARNING: Cannot play Vimeo video when deck is loaded via file://.");l&&m(a,{method:"seekTo",value:0});0<=g&&m(a,{method:"setVolume",value:g/10});m(a,{method:"play"})}},e=function(a){a.pause?a.pause():h.test(a.src)?m(a,{event:"command",
func:"pauseVideo"}):!b&&c.test(a.src)&&m(a,{method:"pause"})},g=function(a,b){a[b||"src"]=a.getAttribute(b||"src")},p=function(a){try{return a.contentDocument.rootElement}catch(b){}},q=function(a,b){(p(a)||a).classList[b||"add"]("active")},t=function(b){b.hasAttribute("data-reload")?g(b,"data"):p(b)?q(b):b.onload=function(){a.slides[a.slide()].contains(b)&&q(b)}},l=function(a){q(a,"remove")},A=d.bind(null,"audio,video,iframe"),f=d.bind(null,'object[type="image/svg+xml"]');a.on("activate",function(a){a.preview?
A(a.slide,e):(A(a.slide,k),f(a.slide,t),d('img[data-reload][src$=".gif"]',a.slide,g))});a.on("deactivate",function(a){A(a.slide,e);f(a.slide,l,":not([data-reload])")})}}},{}],5:[function(e,d,f){d.exports=function(){return function(a){var c=function(c){var b=c.which;if(!(c.ctrlKey||c.shiftKey&&(36===b||35===b)||c.altKey||c.metaKey))switch(c.which){case 32:return(c.shiftKey?a.prev:a.next)();case 39:case 34:case 76:return a.next();case 37:case 33:case 72:return a.prev();case 36:return a.slide(0);case 35:return a.slide(a.slides.length-
1)}};a.on("destroy",function(){document.removeEventListener("keydown",c)});document.addEventListener("keydown",c)}}},{}],6:[function(e,d,f){d.exports=function(a){return function(c){var h=a||{},b=c.parent,d=null,e=null,k="page"+("y"===h.axis?"Y":"X"),f="number"===typeof h.threshold?h.threshold:50/window.devicePixelRatio,g=function(a){d=1===a.touches.length?a.touches[0][k]:null},p=function(a){if(null!==d){if(void 0===d)return a.preventDefault();Math.abs(e=a.touches[0][k]-d)>f&&((0<e?c.prev:c.next)(),
d=a.preventDefault())}};c.on("destroy",function(){b.removeEventListener("touchstart",g);b.removeEventListener("touchmove",p)});b.addEventListener("touchstart",g);b.addEventListener("touchmove",p)}}},{}],7:[function(e,d,f){d.exports=function(a){a=a||{};var c=e("bespoke-nav-kbd")(a.kbd),h=e("bespoke-nav-touch")(a.touch);return function(a){c(a);h(a)}}},{"bespoke-nav-kbd":5,"bespoke-nav-touch":6}],8:[function(e,d,f){d.exports=function(a){e("insert-css")(".bespoke-parent.bespoke-overview{pointer-events:auto}.bespoke-overview :not(img){pointer-events:none}.bespoke-overview .bespoke-slide{opacity:1;visibility:visible;cursor:pointer;pointer-events:auto}.bespoke-overview .bespoke-active{outline:6px solid #cfd8dc;outline-offset:-3px;-moz-outline-radius:3px}.bespoke-overview .bespoke-bullet{opacity:1;visibility:visible}.bespoke-overview-counter{counter-reset:overview}.bespoke-overview-counter .bespoke-slide::after{counter-increment:overview;content:counter(overview);position:absolute;right:.75em;bottom:.5em;font-size:1.25rem;line-height:1.25}.bespoke-title{visibility:hidden;position:absolute;top:0;left:0;width:100%;pointer-events:auto}.bespoke-title h1{margin:0;font-size:1.6em;line-height:1.2;text-align:center}.bespoke-overview:not(.bespoke-overview-to) .bespoke-title{visibility:visible}.bespoke-overview-to .bespoke-active,.bespoke-overview-from .bespoke-active{z-index:1}",
{prepend:!0});return function(c){a="object"===typeof a?a:{};var h=/, */,b=/^none(?:, ?none)*$/,d=/^translate\((.+?)px, ?(.+?)px\) scale\((.+?)\)$/,e=/(^\?|&)overview(?=$|&)/,k=!("transition"in document.body.style)&&"webkitTransition"in document.body.style?"webkitTransitionEnd":"transitionend",f=["webkit","Moz"],g="number"===typeof a.columns?parseInt(a.columns):3,p="number"===typeof a.margin?parseFloat(a.margin):15,q=null,t,l=function(a,b){if(!(b in a.style))for(var c=b.charAt(0).toUpperCase()+b.substr(1),
l=0,g=f.length;l<g;l++)if(f[l]+c in a.style)return f[l]+c;return b},A=function(a){if("zoom"in a.style)return parseFloat(a.style.zoom)||void 0},I=function(a){var c=[],g=getComputedStyle(a),d=g[l(a,"transitionProperty")];if(!d||b.test(d))return c;var d=d.split(h),q=g[l(a,"transitionDuration")].split(h),e=g[l(a,"transitionDelay")].split(h);d.forEach(function(a,b){"0s"===q[b]&&"0s"===e[b]||c.push(a)});return c},z=function(a,b,c,l){b&&(a.style[b]=c);a.offsetHeight;b&&(a.style[b]=l)},G=function(){c.on("activate",
G)();c.parent.scrollLeft=c.parent.scrollTop=0;(a.autostart||e.test(location.search))&&setTimeout(D,100)},P=function(){v(c.slides.indexOf(this))},H=function(a,b){var l=b.index+a;0<=l&&l<c.slides.length&&c.slide(l,{preview:!0});return!1},V=function(a){!1!==a.scrollIntoView&&J(a.slide,a.index,A(a.slide))},Q=function(a){var b=location.search.replace(e,"").replace(/^[^?]/,"?$&");a?history.replaceState(null,null,location.pathname+(0<b.length?b+"&":"?")+"overview"+location.hash):history.replaceState(null,
null,location.pathname+b+location.hash)},J=function(a,b,l){c.parent.scrollTop=b<g?0:c.parent.scrollTop+a.getBoundingClientRect().top*(l||1)},K=function(a,b,c,l){c.removeEventListener(k,t,!1);l&&l!==c&&l.removeEventListener(k,t,!1);t=void 0;b.remove("bespoke-overview-"+a)},W=function(a){var b=a.firstElementChild;if(b.classList.contains("bespoke-title"))return b.style.width="",b;var c=document.createElement("header");c.className="bespoke-title";c.style[l(c,"transformOrigin")]="0 0";var g=document.createElement("h1");
g.appendChild(document.createTextNode(a.getAttribute("data-title")||document.title));c.appendChild(g);z(a.insertBefore(c,b));return c},D=function(){var b=c.slides,d=c.parent,h=d.classList,e=b.length-1,f=c.slide(),m=0<f?b[0]:b[e],x=l(m,"transform"),n=d.querySelector(".bespoke-scale-parent"),r=1,w,u,M=0,R=q,S="webkitAppearance"in d.style;if(n)r=parseFloat(n.style[x].slice(6,-1));else if(w=A(m))r=w;t&&K("from",h,b[0],b[e]);a.title&&(u=W(d));R||(c.slide(f,{preview:!0}),h.add("bespoke-overview"),addEventListener("resize",
D,!1),q=[c.on("activate",V),c.on("prev",H.bind(null,-1)),c.on("next",H.bind(null,1))],a.counter&&h.add("bespoke-overview-counter"),a.location&&Q(!0),h.add("bespoke-overview-to"),M=0<e?I(m).length:0>I(m).join(" ").indexOf("transform")?0:1,d.style.overflowY="scroll",d.style.scrollBehavior="smooth",S&&b.forEach(function(a){z(a,"marginBottom","0%","")}));var T=d.clientWidth/r,v=(n||d).offsetWidth-d.clientWidth,G=n?v/2/r:0,n=m.offsetWidth,C=T/(g*n+(g+1)*p),N=r*C,y=n*C,F=m.offsetHeight*C,X=(T-y)/2,Y=(d.clientHeight/
r-F)/2,U=p*C,O=0,E=0,B=0;u&&(!1!==a.scaleTitle?(u.style[w?"zoom":x]=w?N:"scale("+N+")",u.style.width=d.clientWidth/N+"px",O=u.offsetHeight*C):(0<v&&(u.style.width=d.clientWidth+"px"),O=u.offsetHeight/r));b.forEach(function(a){var b=B*y+(B+1)*U-G-X,c=E*F+(E+1)*U+O-Y;a.style[x]="translate("+(0>b.toString().indexOf("e-")?b:0)+"px, "+(0>c.toString().indexOf("e-")?c:0)+"px) scale("+C+")";E*g+B===e&&(a.style.marginBottom=p+"px");a.addEventListener("click",P,!1);B===g-1?(E+=1,B=0):B+=1});R?J(b[f],f,w):0<
M?m.addEventListener(k,t=function(a){a.target===this&&0===--M&&(K("to",h,this),S&&d.scrollHeight>d.clientHeight&&z(d,"overflowY","auto","scroll"),J(b[f],f,w))},!1):(b.forEach(function(a){z(a)}),h.remove("bespoke-overview-to"),J(b[f],f,w))},v=function(b){c.slide("number"===typeof b?b:c.slide(),{scrollIntoView:!1});b=c.slides;var g=c.parent,h=g.classList,e=b.length-1,f=0<c.slide()?b[0]:b[e],m=l(f,"transform"),p=l(f,"transition"),n=g.querySelector(".bespoke-scale-parent"),r,w="webkitAppearance"in g.style;
n?r=parseFloat(n.style[m].slice(6,-1)):(r=A(f))||(r=1);t&&K("to",h,b[0],b[e]);var u=g.scrollTop/r,v=(g.offsetWidth-(n||g).clientWidth)/2/r;g.style.scrollBehavior=g.style.overflowY="";b.forEach(function(a){w&&z(a,"marginBottom","0%","");a.removeEventListener("click",P,!1)});(u||v)&&b.forEach(function(a){var b=a.style[m].match(d);a.style[m]="translate("+(parseFloat(b[1])-v)+"px, "+(parseFloat(b[2])-u)+"px) scale("+b[3]+")";z(a,p,"none","")});g.scrollTop=0;h.remove("bespoke-overview");removeEventListener("resize",
D,!1);(q||[]).forEach(function(a){a()});q=null;a.counter&&h.remove("bespoke-overview-counter");a.location&&Q(!1);h.add("bespoke-overview-from");var y=0<e?I(f).length:0>I(f).join(" ").indexOf("transform")?0:1;b.forEach(function(a){a.style[m]=""});0<y?f.addEventListener(k,t=function(a){a.target===this&&0===--y&&K("from",h,this)},!1):(b.forEach(function(a){z(a)}),h.remove("bespoke-overview-from"))},y=function(){q?v():D()},F=function(a){if(79===a.which)a.altKey||a.ctrlKey||a.metaKey||a.shiftKey||y();
else if(q)switch(a.which){case 13:a.altKey||a.ctrlKey||a.metaKey||a.shiftKey||v();break;case 38:return H(-g,{index:c.slide()});case 40:return H(g,{index:c.slide()})}};c.on("activate",G);c.on("destroy",function(){removeEventListener("resize",D,!1);document.removeEventListener("keydown",F,!1)});c.on("overview",y);document.addEventListener("keydown",F,!1)}}},{"insert-css":11}],9:[function(e,d,f){d.exports=function(a){return function(c){var d=c.parent,b=c.slides[0],e=b.offsetHeight,f=b.offsetWidth,b=
"zoom"===a||"zoom"in d.style&&"transform"!==a,k=function(a){var b=document.createElement("div");b.className="bespoke-scale-parent";a.parentNode.insertBefore(b,a);b.appendChild(a);return b},n=b?c.slides:c.slides.map(k),g=function(a){return["Moz","Webkit","O","ms"].reduce(function(b,c){return c+a in d.style?c+a:b},a.toLowerCase())}("Transform"),p=b?function(a,b){b.style.zoom=a}:function(a,b){b.style[g]="scale("+a+")"};c=function(){n.forEach(p.bind(null,Math.min(d.offsetWidth/f,d.offsetHeight/e)))};
window.addEventListener("resize",c);c()}}},{}],10:[function(e,d,f){d.exports={from:function(a,c){var d=1===(a.parent||a).nodeType?a.parent||a:document.querySelector(a.parent||a),b=[].filter.call("string"===typeof a.slides?d.querySelectorAll(a.slides):a.slides||d.children,function(a){return"SCRIPT"!==a.nodeName}),e=b[0],f={},k=function(a,c){b[a]&&(p("deactivate",q(e,c)),e=b[a],p("activate",q(e,c)))},n=function(a,c){var d=b.indexOf(e)+a;p(0<a?"next":"prev",q(e,c))&&k(d,c)},g=function(a,b){f[a]=(f[a]||
[]).filter(function(a){return a!==b})},p=function(a,b){return(f[a]||[]).reduce(function(a,c){return a&&!1!==c(b)},!0)},q=function(a,c){c=c||{};c.index=b.indexOf(a);c.slide=a;return c},t={on:function(a,b){(f[a]||(f[a]=[])).push(b);return g.bind(null,a,b)},off:g,fire:p,slide:function(a,c){if(arguments.length)p("slide",q(b[a],c))&&k(a,c);else return b.indexOf(e)},next:n.bind(null,1),prev:n.bind(null,-1),parent:d,slides:b};(c||[]).forEach(function(a){a(t)});k(0);return t}}},{}],11:[function(e,d,f){var a=
{};d.exports=function(c,d){if(!a[c]){a[c]=!0;var b=document.createElement("style");b.setAttribute("type","text/css");"textContent"in b?b.textContent=c:b.styleSheet.cssText=c;var e=document.getElementsByTagName("head")[0];d&&d.prepend?e.insertBefore(b,e.childNodes[0]):e.appendChild(b)}}},{}],12:[function(e,d,f){d.exports=function(a){return function(c){var d,b,e=function(a,b){return f(a)-f(b)},f=function(a){a=(a.getAttribute("class")||"").split(/\s+/);for(var b,c=0,d=a.length;c<d;c++)try{if((b=a[c]).startsWith("step-"))return parseInt(b.substr(5),
10)}catch(e){}return-1},k=c.slides.map(function(b){b=[].slice.call(b.querySelectorAll("string"===typeof a?a:"[data-bespoke-bullet]"),0);0!==b.length&&-1!==(b[0].getAttribute("class")||"").split(" ").indexOf("step-0")&&b.sort(e);return b}),n=function(a,c){d=a;b=c;k.forEach(function(b,d){b.forEach(function(b,e){b.classList.add("bespoke-bullet");d<a||d===a&&e<=c?(b.classList.add("bespoke-bullet-active"),b.classList.remove("bespoke-bullet-inactive")):(b.classList.add("bespoke-bullet-inactive"),b.classList.remove("bespoke-bullet-active"));
d===a&&e===c?b.classList.add("bespoke-bullet-current"):b.classList.remove("bespoke-bullet-current")})})};c.on("next",function(){var a=d+1;if(void 0!==k[d][b+1])return n(d,b+1),!1;k[a]&&n(a,0)});c.on("prev",function(){var a=d-1;if(void 0!==k[d][b+-1])return n(d,b-1),!1;k[a]&&n(a,k[a].length-1)});c.on("slide",function(a){n(a.index,0)});n(0,0)}}},{}],13:[function(e,d,f){f=e("bespoke");var a=e("./bespoke-bullets.js"),c=e("bespoke-classes"),h=e("bespoke-fullscreen"),b=e("bespoke-hash"),x=e("bespoke-multimedia"),
m=e("bespoke-nav"),k=e("bespoke-overview");e=e("bespoke-scale");(d.exports=f).deck=f.from(".deck",[c(),m(),h(),e("transform"),k({margin:20}),a(".build, .build-items > *:not(.build-items)"),x(),function(a){window.addEventListener("load",function p(){Array.prototype.forEach.call(a.parent.querySelectorAll("h2.fit, ul.fit"),function(a){var b=a.getBoundingClientRect().width,c=a.querySelectorAll(".line");0===c.length&&(a.style.display="inline-block",a.style.width="initial",c=[a]);Array.prototype.forEach.call(c,
function(a){var c=a.getBoundingClientRect().width,d=parseFloat(window.getComputedStyle(a).fontSize),c=b/c*d;d!=c&&(a.style.fontSize=c+"px")});c[0]===a&&(a.style.display="",a.style.width="")});window.removeEventListener("load",p)},!1)},b()])},{"./bespoke-bullets.js":12,bespoke:10,"bespoke-classes":1,"bespoke-fullscreen":2,"bespoke-hash":3,"bespoke-multimedia":4,"bespoke-nav":7,"bespoke-overview":8,"bespoke-scale":9}]},{},[13])(13)});
